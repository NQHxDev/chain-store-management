generator client {
   provider = "prisma-client"
   output   = "../src/generated/prisma"
   moduleFormat = "cjs"
}

datasource db {
   provider = "mysql"
}

model Role {
   roleId Int @id @default(autoincrement())
   roleName String @unique @db.VarChar(100)
   roleDesc String? @db.LongText

   users User[]
}

enum UserStatus {
   active
   inactive
   pending
   banned
}

model User {
   userId String @id @db.Char(36)
   username String? @unique @db.VarChar(100)
   email String @unique @db.VarChar(255)
   passwordHash String @db.VarChar(255)

   roleId Int
   status UserStatus @default(pending)

   createdAt DateTime @db.Timestamp(0) @default(now())
   updatedAt DateTime @db.Timestamp(0) @updatedAt

   @@index([status, userId])

   role Role @relation(fields: [roleId], references: [roleId], onDelete: Cascade, onUpdate: NoAction)
}
